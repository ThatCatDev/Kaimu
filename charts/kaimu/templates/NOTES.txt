
Kaimu has been deployed!

{{- if .Values.backend.enabled }}

BACKEND:
  Service: {{ include "kaimu.backend.name" . }}
  Port: {{ .Values.backend.service.port }}

  To access the backend API internally:
    http://{{ include "kaimu.backend.name" . }}:{{ .Values.backend.service.port }}/graphql

  {{- if .Values.ingress.enabled }}
  {{- if .Values.ingress.backend.enabled }}
  External URL (via Ingress):
  {{- range .Values.ingress.backend.hosts }}
    http{{ if $.Values.ingress.backend.tls }}s{{ end }}://{{ .host }}
  {{- end }}
  {{- end }}
  {{- else }}

  To access the backend locally:
    kubectl port-forward svc/{{ include "kaimu.backend.name" . }} {{ .Values.backend.service.port }}:{{ .Values.backend.service.port }}
    Then visit: http://localhost:{{ .Values.backend.service.port }}/graphql
  {{- end }}
{{- end }}

{{- if .Values.frontend.enabled }}

FRONTEND:
  Service: {{ include "kaimu.frontend.name" . }}
  Port: {{ .Values.frontend.service.port }}

  {{- if .Values.ingress.enabled }}
  {{- if .Values.ingress.frontend.enabled }}
  External URL (via Ingress):
  {{- range .Values.ingress.frontend.hosts }}
    http{{ if $.Values.ingress.frontend.tls }}s{{ end }}://{{ .host }}
  {{- end }}
  {{- end }}
  {{- else }}

  To access the frontend locally:
    kubectl port-forward svc/{{ include "kaimu.frontend.name" . }} {{ .Values.frontend.service.port }}:{{ .Values.frontend.service.port }}
    Then visit: http://localhost:{{ .Values.frontend.service.port }}
  {{- end }}
{{- end }}

{{- if not .Values.backend.enabled }}
{{- if not .Values.frontend.enabled }}

WARNING: Both backend and frontend are disabled. No services have been deployed.
{{- end }}
{{- end }}

NEXT STEPS:

1. Database migrations run automatically before deployment via a pre-install/pre-upgrade hook.
   To manually run migrations:
   kubectl exec -it deployment/{{ include "kaimu.backend.name" . }} -- ./main migrate up

2. Configure your DNS to point to the ingress controller's IP address.

3. For production, ensure you have:
   - Configured TLS certificates (e.g., using cert-manager)
   - Set up proper database credentials
   - Configured OIDC providers
   - Set up email service for notifications

For more information, visit: https://github.com/your-org/kaimu
